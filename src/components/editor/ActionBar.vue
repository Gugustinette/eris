<template>
  <div class="code-editor-action-bar">
    <div class="left">
      <div class="action" @click="this.$emit('export-css')">
        <svg
          width="24"
          height="25"
          viewBox="0 0 24 25"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4 5.68809C4 3.88644 5.40423 2.28809 7.31339 2.28809H12.3425C13.3927 2.28809 14.4567 2.67989 15.2604 3.47893L15.2701 3.48859L18.8866 7.18414C19.6883 7.98458 20.0956 9.15706 19.9809 10.2452V18.8881C19.9809 20.6897 18.5767 22.2881 16.6675 22.2881H7.31339C5.40423 22.2881 4 20.6897 4 18.8881V5.68809ZM7.31339 4.28809C6.60742 4.28809 6 4.88974 6 5.68809V18.8881C6 19.6864 6.60742 20.2881 7.31339 20.2881H16.6675C17.3735 20.2881 17.9809 19.6864 17.9809 18.8881V10.1881C17.9809 10.1464 17.9835 10.1047 17.9888 10.0633C18.0504 9.57265 17.8563 8.98011 17.4712 8.59724L17.4615 8.58758L13.8459 4.89292C13.443 4.49478 12.8996 4.28809 12.3425 4.28809H7.31339Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12 12.2881C12.5523 12.2881 13 12.7358 13 13.2881V17.2881C13 17.6725 12.7796 18.0229 12.4332 18.1894C12.0867 18.3559 11.6755 18.3091 11.3753 18.069L9.37528 16.469C8.94402 16.1239 8.8741 15.4947 9.21911 15.0634C9.56412 14.6321 10.1934 14.5622 10.6247 14.9072L11 15.2075V13.2881C11 12.7358 11.4477 12.2881 12 12.2881Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M14.7808 15.0634C15.1259 15.4947 15.0559 16.1239 14.6247 16.469L12.6247 18.069C12.1934 18.414 11.5641 18.344 11.2191 17.9128C10.8741 17.4815 10.944 16.8522 11.3753 16.5072L13.3753 14.9072C13.8065 14.5622 14.4358 14.6321 14.7808 15.0634Z"
          />
        </svg>
        <div class="action-title">{{ t("EDITOR.EXPORT_CSS") }}</div>
      </div>
      <div class="action" @click="this.$emit('export-package')">
        <svg
          width="24"
          height="25"
          viewBox="0 0 24 25"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M2 6.85219C2 4.89332 3.51277 3.28809 5.48619 3.28809H8.96685C10.0949 3.28809 11.1746 3.68204 11.9849 4.62917L13.1489 5.74962H18.5138C20.4872 5.74962 22 7.35486 22 9.31373V17.724C22 19.6829 20.4872 21.2881 18.5138 21.2881H5.48619C3.51277 21.2881 2 19.6829 2 17.724V6.85219ZM5.48619 5.28809C4.67507 5.28809 4 5.93926 4 6.85219V17.724C4 18.6369 4.67507 19.2881 5.48619 19.2881H18.5138C19.3249 19.2881 20 18.6369 20 17.724V9.31373C20 8.4008 19.3249 7.74962 18.5138 7.74962H12.7459C12.4872 7.74962 12.2387 7.64943 12.0524 7.47008L10.5606 6.03418C10.534 6.00851 10.5087 5.98137 10.4851 5.9529C10.1061 5.49695 9.61099 5.28809 8.96685 5.28809H5.48619Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12 9.78809C12.5523 9.78809 13 10.2358 13 10.7881V15.7881C13 16.1725 12.7797 16.5229 12.4332 16.6894C12.0867 16.8559 11.6755 16.8091 11.3753 16.569L8.87531 14.569C8.44405 14.2239 8.37413 13.5947 8.71914 13.1634C9.06415 12.7321 9.69344 12.6622 10.1247 13.0072L11 13.7075V10.7881C11 10.2358 11.4477 9.78809 12 9.78809Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2809 13.1634C15.6259 13.5946 15.556 14.2239 15.1247 14.5689L12.6247 16.5689C12.1934 16.9139 11.5641 16.844 11.2191 16.4128C10.8741 15.9815 10.944 15.3522 11.3753 15.0072L13.8753 13.0072C14.3066 12.6622 14.9359 12.7321 15.2809 13.1634Z"
          />
        </svg>
        <div class="action-title">{{ t("EDITOR.EXPORT_PACKAGE") }}</div>
      </div>
    </div>
    <div class="right">
      <div
        :class="{
          visible: true,
          'main-action': true,
          'main-action-on': needsToBeSaved,
        }"
        @click="save()"
      >
        <svg
          width="14"
          height="14"
          viewBox="0 0 14 14"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M1.1665 3.20835C1.1665 2.06646 2.07599 1.16669 3.21632 1.16669H8.55431C9.26133 1.16669 9.8726 1.47999 10.3148 1.91973L12.0598 3.65503C12.6082 4.13201 12.8332 4.76602 12.8332 5.42502V10.7917C12.8332 11.9336 11.9237 12.8334 10.7834 12.8334H9.84481C9.52264 12.8334 9.26148 12.5722 9.26148 12.25V9.39169C9.26148 9.19191 9.1151 9.04169 8.90626 9.04169H5.09341C4.88458 9.04169 4.7382 9.19191 4.7382 9.39169V11.6667H8.02637C8.34854 11.6667 8.60971 11.9279 8.60971 12.25C8.60971 12.5722 8.34854 12.8334 8.02637 12.8334H3.21632C2.09163 12.8334 1.1665 11.9489 1.1665 10.85V3.20835ZM3.57153 11.6667H3.21632C2.69855 11.6667 2.33317 11.2678 2.33317 10.85V3.20835C2.33317 2.71691 2.71419 2.33335 3.21632 2.33335H8.55431C8.90315 2.33335 9.23043 2.48672 9.49214 2.74698L11.2519 4.49698C11.2625 4.5075 11.2735 4.51762 11.2848 4.5273C11.5444 4.74859 11.6665 5.04124 11.6665 5.42502V10.7917C11.6665 11.2831 11.2855 11.6667 10.7834 11.6667H10.4281V9.39169C10.4281 8.54146 9.75329 7.87502 8.90626 7.87502H5.09341C4.24638 7.87502 3.57153 8.54146 3.57153 9.39169V11.6667Z"
          />
        </svg>
        {{ t("ACTIONS.SAVE") }}
      </div>
      <div
        v-if="allreadyPublished"
        :class="{
          visible: owned,
          'main-action': true,
          'main-action-on': needsToBePublished,
        }"
        @click="update()"
      >
        <svg
          width="15"
          height="14"
          viewBox="0 0 15 14"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.1295 3.71875C11.0134 3.71875 10.8972 3.71875 10.7811 3.71875C10.1423 2.52557 8.86479 1.75 7.47113 1.75C6.13553 1.75 4.91608 2.52557 4.21924 3.71875C4.1031 3.71875 3.98697 3.71875 3.87083 3.71875C2.36102 3.71875 1.0835 5.03125 1.0835 6.64205C1.0835 8.25284 2.36102 9.50568 3.9289 9.50568H5.4387C5.78712 9.50568 6.01939 9.26705 6.01939 8.90909C6.01939 8.55114 5.78712 8.3125 5.4387 8.3125H3.9289C2.99979 8.3125 2.24488 7.53693 2.24488 6.64205C2.24488 5.74716 2.99979 4.91193 3.9289 4.91193C4.1031 4.91193 4.27731 4.91193 4.39345 4.97159C4.6838 5.09091 4.97414 4.91193 5.09028 4.61364C5.49677 3.59943 6.42588 2.94318 7.5292 2.94318C8.63252 2.94318 9.56163 3.59943 9.96811 4.61364C10.0843 4.91193 10.3746 5.03125 10.6649 4.97159C10.8392 4.91193 10.9553 4.91193 11.1295 4.91193C12.0586 4.91193 12.8135 5.6875 12.8135 6.64205C12.8135 7.59659 12.0586 8.3125 11.1295 8.3125H8.10989V6.52273L8.69059 7.11932C8.80672 7.23864 8.98093 7.2983 9.09707 7.2983C9.21321 7.2983 9.38742 7.23864 9.50356 7.11932C9.73583 6.88068 9.73583 6.52273 9.50356 6.28409L7.87761 4.61364C7.81954 4.55398 7.76148 4.49432 7.70341 4.49432C7.58727 4.43466 7.41306 4.43466 7.23885 4.49432C7.18078 4.55398 7.12271 4.55398 7.06464 4.61364L5.49677 6.28409C5.26449 6.52273 5.26449 6.94034 5.49677 7.11932C5.72905 7.2983 6.07746 7.35795 6.30974 7.11932L6.89043 6.52273V11.6534C6.89043 12.0114 7.12271 12.25 7.47113 12.25C7.81954 12.25 8.05182 12.0114 8.05182 11.6534V9.50568H11.0714C12.6393 9.50568 13.9168 8.19318 13.9168 6.58239C13.9168 4.97159 12.6974 3.71875 11.1295 3.71875Z"
          />
        </svg>
        {{ t("ACTIONS.UPDATE") }}
      </div>
      <div
        v-else
        :class="{
          visible: owned,
          'main-action': true,
          'main-action-on': needsToBePublished,
        }"
        @click="publish()"
      >
        <svg
          width="15"
          height="14"
          viewBox="0 0 15 14"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.1295 3.71875C11.0134 3.71875 10.8972 3.71875 10.7811 3.71875C10.1423 2.52557 8.86479 1.75 7.47113 1.75C6.13553 1.75 4.91608 2.52557 4.21924 3.71875C4.1031 3.71875 3.98697 3.71875 3.87083 3.71875C2.36102 3.71875 1.0835 5.03125 1.0835 6.64205C1.0835 8.25284 2.36102 9.50568 3.9289 9.50568H5.4387C5.78712 9.50568 6.01939 9.26705 6.01939 8.90909C6.01939 8.55114 5.78712 8.3125 5.4387 8.3125H3.9289C2.99979 8.3125 2.24488 7.53693 2.24488 6.64205C2.24488 5.74716 2.99979 4.91193 3.9289 4.91193C4.1031 4.91193 4.27731 4.91193 4.39345 4.97159C4.6838 5.09091 4.97414 4.91193 5.09028 4.61364C5.49677 3.59943 6.42588 2.94318 7.5292 2.94318C8.63252 2.94318 9.56163 3.59943 9.96811 4.61364C10.0843 4.91193 10.3746 5.03125 10.6649 4.97159C10.8392 4.91193 10.9553 4.91193 11.1295 4.91193C12.0586 4.91193 12.8135 5.6875 12.8135 6.64205C12.8135 7.59659 12.0586 8.3125 11.1295 8.3125H8.10989V6.52273L8.69059 7.11932C8.80672 7.23864 8.98093 7.2983 9.09707 7.2983C9.21321 7.2983 9.38742 7.23864 9.50356 7.11932C9.73583 6.88068 9.73583 6.52273 9.50356 6.28409L7.87761 4.61364C7.81954 4.55398 7.76148 4.49432 7.70341 4.49432C7.58727 4.43466 7.41306 4.43466 7.23885 4.49432C7.18078 4.55398 7.12271 4.55398 7.06464 4.61364L5.49677 6.28409C5.26449 6.52273 5.26449 6.94034 5.49677 7.11932C5.72905 7.2983 6.07746 7.35795 6.30974 7.11932L6.89043 6.52273V11.6534C6.89043 12.0114 7.12271 12.25 7.47113 12.25C7.81954 12.25 8.05182 12.0114 8.05182 11.6534V9.50568H11.0714C12.6393 9.50568 13.9168 8.19318 13.9168 6.58239C13.9168 4.97159 12.6974 3.71875 11.1295 3.71875Z"
          />
        </svg>
        {{ t("ACTIONS.PUBLISH") }}
      </div>
    </div>
  </div>
</template>

<script>
import { useI18n } from "vue-i18n";

export default {
  setup() {
    const { t } = useI18n();

    return {
      t,
    };
  },
  name: "EditorActionBar",
  props: {
    owned: {
      type: Boolean,
      required: false,
    },
    isConnected: {
      type: Boolean,
      required: false,
    },
    needsToBeSaved: {
      type: Boolean,
      required: false,
    },
    needsToBePublished: {
      type: Boolean,
      required: false,
    },
    allreadyPublished: {
      type: Boolean,
      required: false,
    },
  },
  methods: {
    save() {
      if (this.needsToBeSaved) {
        this.$emit("save-css");
      }
    },
    publish() {
      if (this.needsToBePublished) {
        this.$emit("publish-css");
      }
    },
    update() {
      if (this.needsToBePublished) {
        this.$emit("update-css");
      }
    },
  },
};
</script>

<style lang="scss">
.code-editor-action-bar {
  --action-bar-size: 50px;
  background: var(--color-primary);
  height: var(--action-bar-size);
  width: 100%;
  display: flex;
  flex-direction: row;

  .left {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    height: 100%;

    .action {
      position: relative;
      height: var(--action-bar-size);
      width: var(--action-bar-size);
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: background 0.1s ease-in;

      &:hover {
        background: var(--color-primary-hover);
        transition: background 0.1s ease-in;

        .action-title {
          transform: translateX(-50%) scale(1) translateY(2px);
          opacity: 1;
        }
      }

      svg {
        fill: var(--color-secondary);
      }

      .action-title {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%) scale(0.8) translateY(-5px);
        opacity: 0;
        background: var(--color-primary-hover);
        color: var(--color-secondary);
        z-index: 10000;
        padding: 2px 5px;
        border-radius: 5px;
        transition: all 0.1s ease-in;
        white-space: nowrap;
      }
    }
  }

  .right {
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
    column-gap: 20px;
    height: 100%;
    width: 100%;
    margin-right: 20px;
  }

  .main-action {
    border-radius: 7px;
    background: var(--black-off);
    color: var(--color-primary-hover);
    fill: var(--color-primary-hover);
    display: none;
    justify-content: space-between;
    column-gap: 5px;
    align-items: center;
    padding: 10px 20px;
    min-width: 50px;
    cursor: pointer;
  }

  .main-action-on {
    background: var(--color-secondary);
    color: var(--color-primary);
  }

  .visible {
    display: flex;
  }
}
</style>
